# DESIGN_FREEZE_CHECKLIST

## 文档目的
汇总设计冻结前必须完成的“待决策 + 待补充”事项，作为冻结 gate 的唯一检查表。

## 当前状态
- 状态：v1 Frozen（已冻结）
- 使用方式：作为冻结基线记录；后续新增需求先走变更条目再更新对应文档

## 状态定义
1. `未开始`
2. `进行中`
3. `已完成`

## A. 待决策清单
1. `README.md`
- 事项：项目一句话定位；首个冻结范围（架构/API/数据模型）
- 状态：已完成
- 完成记录：2026-02-22；负责人：你（确认）+ 我（落文）

2. `SECURITY.md`
- 事项：真实变更门禁策略；风险分级标准；安全签署流程；插件签名与信任模型
- 状态：已完成
- 完成记录：2026-02-22；负责人：你（确认）+ 我（落文）

3. `decisions/ARCHITECTURE_DECISIONS.md`
- 事项：ADR 编号规则；ADR 模板字段
- 状态：已完成
- 完成记录：2026-02-22；负责人：你（确认）+ 我（落文）

4. `docs/API_SPEC.md`
- 事项：discover 是否支持显式 `--source`；history 是否分页；plain 模式错误格式；repo sync 默认增量策略
- 状态：已完成
- 完成记录：2026-02-22；负责人：你（确认）+ 我（落文）

5. `docs/ARCHITECTURE.md`
- 事项：inventory 去重主键；stale 阈值；AI linker 离线策略
- 状态：已完成
- 完成记录：2026-02-22；负责人：你（确认）+ 我（落文）

6. `docs/CARGO_DEPENDENCY_BASELINE_DRAFT.md`
- 事项：V1 是否采用 `tokio`；`windows` crate 覆盖范围；`rusqlite bundled` 长期策略
- 状态：已完成
- 完成记录：2026-02-22；负责人：你（确认）+ 我（落文）

7. `docs/DATA_MODEL.md`
- 事项：inventory 去重键最终定义；cleanup 强关联键方案；audit payload 是否结构化拆列
- 状态：已完成
- 完成记录：2026-02-22；负责人：你（确认）+ 我（落文）

8. `docs/DOWNLOAD_CACHE_POLICY_DRAFT.md`
- 事项：缓存保留期动态策略；手动固定不清理；是否新增 cache stats 命令
- 状态：已完成
- 完成记录：2026-02-22；负责人：你（确认）+ 我（落文）

9. `docs/DOWNLOAD_SOURCE_POLICY_DRAFT.md`
- 事项：企业策略覆盖白名单；子域继承默认；一次性临时授权策略
- 状态：已完成
- 完成记录：2026-02-22；负责人：你（确认）+ 我（落文）

10. `docs/FEATURES.md`
- 事项：更新检测默认模式；体检/清理/修复最小边界；Phase 2 搜索增强粒度；Discovery 冲突处理规则
- 状态：已完成
- 完成记录：2026-02-22；负责人：你（确认）+ 我（落文）

11. `docs/HASH_AND_SIGNATURE_POLICY_DRAFT.md`
- 事项：签名缺失默认 warn/block；发布者白名单策略；是否支持 SHA512
- 状态：已完成
- 完成记录：2026-02-22；负责人：你（确认）+ 我（落文）

12. `docs/JOB_RETRY_POLICY_DRAFT.md`
- 事项：按 job_type 覆盖重试次数；jitter 策略；批量死信回放
- 状态：已完成
- 完成记录：2026-02-22；负责人：你（确认）+ 我（落文）

13. `docs/JOB_TYPES_DRAFT.md`
- 事项：幂等键；fan-out；download.verify 强制串联
- 状态：已完成
- 完成记录：2026-02-22；负责人：你（确认）+ 我（落文）

14. `docs/PLUGIN_LIFECYCLE_SEQUENCE.md`
- 事项：自动 blocked 阈值；blocked 恢复审批；批量执行重试
- 状态：已完成
- 完成记录：2026-02-22；负责人：你（确认）+ 我（落文）

15. `docs/PLUGIN_PERMISSION_MATRIX.md`
- 事项：命令级权限粒度；临时授权 token；企业策略覆盖层
- 状态：已完成
- 完成记录：2026-02-22；负责人：你（确认）+ 我（落文）

16. `docs/PLUGIN_SYSTEM.md`
- 事项：原生插件 vs WASM；签名信任模型；权限粒度；Phase 2 是否强制 signature
- 状态：已完成
- 完成记录：2026-02-22；负责人：你（确认）+ 我（落文）

17. `docs/PRODUCT_SPEC.md`
- 事项：8 项顶层产品决策（平台/CLI/真实变更默认/审计导出/插件开放/AI 修复策略/下载边界/UI 入口）
- 状态：已完成
- 完成记录：2026-02-22；负责人：你（确认）+ 我（落文）

18. `docs/ROADMAP.md`
- 事项：MVP 截止口径；更新检测默认；Phase 2 投入边界；Discovery 扩展顺序；队列后端路线
- 状态：已完成
- 完成记录：2026-02-22；负责人：你（确认）+ 我（落文）

19. `docs/SANDBOX_EXECUTION_POLICY_DRAFT.md`
- 事项：Windows sandbox 技术选型；网络策略是否独立代理；策略版本存储位置
- 状态：已完成
- 完成记录：2026-02-22；负责人：你（确认）+ 我（落文）

20. `docs/SECURITY_BASELINE_DRAFT.md`
- 事项：MVP sandbox 形态；Phase 2 签名覆盖范围；审计保留与归档时长
- 状态：已完成
- 完成记录：2026-02-22；负责人：你（确认）+ 我（落文）

21. `docs/SOFTWARE_REPOSITORY_SYSTEM_DRAFT.md`
- 事项：公共仓库单源/多源；software.yaml schema_version；社区审核单/双人
- 状态：已完成
- 完成记录：2026-02-22；负责人：你（确认）+ 我（落文）

22. `docs/TECH_STACK.md`
- 事项：原生插件加载方式；WASM 运行时；插件签名链路；AI provider 首选；签名覆盖类型
- 状态：已完成
- 完成记录：2026-02-22；负责人：你（确认）+ 我（落文）

23. `docs/UI_GLOBAL_SEARCH_DRAFT.md`
- 事项：中英混搜优先级；自定义快捷动作；内联参数编辑
- 状态：已完成
- 完成记录：2026-02-22；负责人：你（确认）+ 我（落文）

24. `docs/UI_MAP.md`
- 事项：首版 UI 形态；插件命令结果支持；默认排序策略
- 状态：已完成
- 完成记录：2026-02-22；负责人：你（确认）+ 我（落文）

25. `docs/UI_SEARCH_RANKING_DRAFT.md`
- 事项：用户手动置顶；场景化排序配置；高风险惩罚分可配置性
- 状态：已完成
- 完成记录：2026-02-22；负责人：你（确认）+ 我（落文）

26. `docs/UI_SHORTCUTS_DRAFT.md`
- 事项：MVP 自定义快捷键；Vim 导航；双击 Ctrl 呼出
- 状态：已完成
- 完成记录：2026-02-22；负责人：你（确认）+ 我（落文）

27. `docs/UX_FLOW.md`
- 事项：默认排序策略；自然语言与命令混合规则；高频快捷键集合
- 状态：已完成
- 完成记录：2026-02-22；负责人：你（确认）+ 我（落文）

28. `logs/DEVELOPMENT_LOG.md`
- 事项：日志粒度；里程碑记录格式
- 状态：已完成
- 完成记录：2026-02-22；负责人：你（确认）+ 我（落文）

## B. 待补充清单
1. `README.md`
- 事项：项目概述、技术栈摘要、快速启动、目录结构说明
- 状态：已完成
- 完成记录：2026-02-22；负责人：你（确认）+ 我（落文）

2. `SECURITY.md`
- 事项：将 11 组安全草案条目冻结为正式策略（原则、威胁、漏洞流程、发布门禁、插件/AI/下载/sandbox/仓库边界）
- 状态：已完成
- 完成记录：2026-02-22；负责人：你（确认）+ 我（落文）

3. `decisions/ARCHITECTURE_DECISIONS.md`
- 事项：补齐 ADR-001/002/003
- 状态：已完成
- 完成记录：2026-02-22；负责人：你（确认）+ 我（落文）

4. `docs/API_SPEC.md`
- 事项：补全失败示例；补 smoke 脚本草案；增加字段稳定级标签
- 状态：已完成
- 完成记录：2026-02-22；负责人：你（确认）+ 我（落文）

5. `docs/ARCHITECTURE.md`
- 事项：补系统时序图；补模块依赖图；补失败注入测试点
- 状态：已完成
- 完成记录：2026-02-22；负责人：你（确认）+ 我（落文）

6. `docs/DATA_MODEL.md`
- 事项：补 ER 图；补 TTL/归档策略；补性能基线
- 状态：已完成
- 完成记录：2026-02-22；负责人：你（确认）+ 我（落文）

7. `docs/FEATURES.md`
- 事项：将 MVP/Phase2/暂不做清单从草稿态改为冻结态
- 状态：已完成
- 完成记录：2026-02-22；负责人：你（确认）+ 我（落文）

8. `docs/PRODUCT_SPEC.md`
- 事项：将目标用户/问题定义/价值主张/MVP In-Out-DoD/边界条目从 Draft 变为冻结
- 状态：已完成
- 完成记录：2026-02-22；负责人：你（确认）+ 我（落文）

9. `docs/ROADMAP.md`
- 事项：将执行版 Phase 计划绑定时间窗与验收口径
- 状态：已完成
- 完成记录：2026-02-22；负责人：你（确认）+ 我（落文）

10. `docs/TECH_STACK.md`
- 事项：`Cargo.toml` 逐项对齐；Windows API 封装方案；插件运行时 PoC；AI provider 接口草案
- 状态：已完成
- 完成记录：2026-02-22；负责人：你（确认）+ 我（落文）

11. `docs/UI_MAP.md`
- 事项：信息架构/搜索面板/结果结构/详情映射/交互反馈冻结化
- 状态：已完成
- 完成记录：2026-02-22；负责人：你（确认）+ 我（落文）

12. `docs/UX_FLOW.md`
- 事项：主流程 A-D + 异常/确认/回退流程冻结化
- 状态：已完成
- 完成记录：2026-02-22；负责人：你（确认）+ 我（落文）

13. `logs/DEVELOPMENT_LOG.md`
- 事项：里程碑记录规范；发布记录规范
- 状态：已完成
- 完成记录：2026-02-22；负责人：你（确认）+ 我（落文）

## C. 冻结判定 Gate
1. A 区（待决策）全部为 `已完成`。
2. B 区（待补充）全部为 `已完成`。
3. 以下文档头部状态同步更新为 Frozen/Final：
- `docs/PRODUCT_SPEC.md`
- `docs/FINAL_ARCHITECTURE.md`
- `docs/API_SPEC.md`
- `docs/DATA_MODEL.md`
- `docs/TECH_STACK.md`
- `docs/ROADMAP.md`
- `SECURITY.md`
4. 追加 ADR“设计冻结”记录（`decisions/ARCHITECTURE_DECISIONS.md`）。

冻结结果：
- 完成日期：2026-02-22
- 结论：Gate 全部满足，设计冻结生效

## 更新规则
1. 任何新增待决策项必须先进入本清单，再进入对应文档。
2. 任何事项状态变更必须附带变更日期与责任人说明（你/我）。
